
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml">
   
   	
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <link rel="stylesheet" type="text/css" href="explain.css" />
      <title>XQuery Exercise 1</title>
   </head>
   
   
   
   <body>
      <!--#include virtual="top.html" -->
      	
      		
      <h1><span class="banner">XQuery Exercise 1</span></h1>
      		
      		
      		
      			
      <p>For our first XQuery exercise we'll be working with a collection of Shakespeare's
         plays  (actually NOT coded in TEI). We have uploaded these into our eXist XML database.
         You can locate them in this collection: <span class="code">collection('/db/shakespeare/plays')</span></p>
      			
      <p>Write XQuery expressions for each of the following tasks. Paste these into a text
         file or a document, and upload your assignment to Courseweb. 
      </p>
      			
      <ol>
         			
         <li>Find all of the titles of all of the Shakespeare plays in the collection. You will
            need to read our <strong><a href="explainXQuery.html">Guide to XQuery and eXist</a></strong> for information about how to address the collection of plays. The Guide will also
            help you figure out  how to retrieve the full text of one of the plays so that you
            can look at it and see where the <span class="code">&lt;TITLE&gt;</span> element is, which you will need to know in order to construct the XPath to retrieve
            it. The simplest answer is a single XPath expression. The output should look something
            like:
            			  
            <div class="code">&lt;TITLE&gt;The Tragedy of Hamlet, Prince of Denmark&lt;/TITLE&gt;  <br />&lt;TITLE&gt;The Tragedy of Macbeth&lt;/TITLE&gt;  <br />&lt;TITLE&gt;The Tragedy of Romeo and Juliet&lt;/TITLE&gt;
            </div>
            			  
         </li>
         			
         <li>Modify your XPath above to return just the text of the titles, without the tags. You
            can do that by using <span class="code">text() </span>or <span class="code">data() </span>or <span class="code">string()</span> . Your output should look something like:<br />
            			  <br />
            
            <div class="code">The Tragedy of Hamlet, Prince of Denmark<br />  
               	The Tragedy of Macbeth<br />  
               	The Tragedy of Romeo and Juliet
            </div>
            			
         </li>
         				
         				
         				
         <li>Find the play that contains a count of more than 40 unique (distinct) speakers and
            then return its <span class="code">&lt;TITLE&gt;</span> element. You will need to use <span class="code">count()</span> and <span class="code">distinct-values()</span>, and you'll need a construction involving <strong>count(of something) gt 40</strong> . <br />
            				  Find the collection, drill down to the <span class="code">&lt;PLAY&gt;</span> elements in the collection (you know there are three of them), then filter them based
            on whether or not they contain more than 40 <span class="code">&lt;SPEAKER&gt;</span> elements. Once you’re getting the one play that meets that description, you can add
            a path step to retrieve its <span class="code">&lt;TITLE&gt;</span>.<br />
            				  <br />
            			  
         </li>
         				
         <li>Modify your solution to the preceding question #3 to return <strong>just the text of the play title, without the &lt;TITLE&gt; tags</strong>. You can take the same approach as you did for the transition from question #1 to
            question #2.<br />
            				  <br />
            				
         </li>
         			  
         <li><strong>OPTIONAL CHALLENGE (EXTRA CREDIT): FLWOR Statement or XPath expression?:</strong> Did you write your XQuery for number 4 with a long XPath expression (from left to
            right)? Or did you write it up as a FLWOR statement? If you did one, try the other!
            See if you can duplicate your results! <br />
            			    <br />
            			  
         </li>
         			
      </ol>
      		
      	
   </body>
   
   
   
   
</html>